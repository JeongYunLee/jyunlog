import{C as e,Ct as t,E as n,Mt as r,Qt as i,V as a,W as o,Y as s,_ as c,c as l,dt as u,g as d,h as f,lt as p,m,tn as h,v as g,w as _}from"./vendor/json-editor-vue-jlmu1vk1.js";import{j as v}from"./ready-mmkdpbhg.js";import{i as y}from"./nuxt-h34yfo3l.js";import"./head-k6pu038r.js";import{g as b}from"./state-b65zn1p8.js";import{D as x,u as S}from"./client-ea5fdhj9.js";import"./vendor/shiki-jnavg768.js";import{n as C}from"./dev-auth-jrf61eu0.js";import"./nuxt-link-lrojf3ui.js";import{t as w}from"./nicon-j0r9gdjm.js";import{t as T}from"./nbutton-m0kqfedx.js";import"./ncard-qqqgbjy9.js";import{r as E}from"./state-routes-ovtjymzc.js";import"./npanel-grids-m4ogaoh1.js";import"./ntext-input-ozkk5xro.js";import{a as D}from"#entry";import"./composables-k2ak4j8d.js";import{n as O,t as k}from"./vendor/xterm-du7kv949.js";var A={border:`t base`,flex:`~ gap-2`,"items-center":``,p2:``},j={"text-sm":``,op50:``},M=n({__name:`TerminalView`,props:{id:{}},setup(e){let n=e,r=t(),i=y(),s=t(),u;a(async()=>{u=new k({convertEol:!0,cols:80,screenReaderMode:!0});let e=new O;u.loadAddon(e),u.open(r.value),e.fit(),x(window,`resize`,()=>{e.fit()}),s.value=await S.getTerminalDetail(await C(),n.id),s.value?.buffer&&u.write(s.value.buffer),i.hook(`devtools:terminal:data`,({id:e,data:t})=>{e===n.id&&u.write(t)})});async function p(){S.runTerminalAction(await C(),n.id,`clear`),u?.clear()}async function m(){S.runTerminalAction(await C(),n.id,`restart`)}async function v(){S.runTerminalAction(await C(),n.id,`terminate`)}return(e,t)=>{let n=T;return o(),g(l,null,[f(`div`,{ref_key:`container`,ref:r,"h-full":``,"w-full":``,"of-auto":``,"bg-black":``},null,512),f(`div`,A,[_(n,{title:`Clear`,icon:`i-carbon-clean`,border:!1,onClick:t[0]||=e=>p()}),s.value?.restartable?(o(),d(n,{key:0,title:`Restart`,icon:`carbon-renew`,border:!1,onClick:t[1]||=e=>m()})):c(``,!0),s.value?.terminatable?(o(),d(n,{key:1,title:`Terminate`,icon:`carbon-delete`,border:!1,onClick:t[2]||=e=>v()})):c(``,!0),f(`span`,j,h(s.value?.description),1)])],64)}}}),N=Object.assign(M,{__name:`TerminalView`}),P={key:0,"h-full":``,"w-full":``,"of-hidden":``,grid:`~ rows-[max-content_1fr_max-content]`},F={flex:`~`,border:`b base`,"n-navbar-glass":``,"flex-1":``,"items-center":``},I=[`onClick`],L={key:1,p10:``},R={key:1,"h-full":``,flex:``,"items-center":``,"justify-center":``},z=n({__name:`TerminalPage`,setup(t){let n=b(),a=E(),u=m(()=>n.value?.find(e=>e.id===a.value));async function _(e){S.runTerminalAction(await C(),e,`remove`)}return p(()=>{!a.value&&n.value?.length&&(a.value=n.value[0].id)}),(t,p)=>{let m=w,y=T,b=N;return r(n)?.length?(o(),g(`div`,P,[f(`div`,F,[(o(!0),g(l,null,s(r(n),e=>(o(),g(`button`,{key:e.id,border:`r base`,flex:`~ gap-2`,"items-center":``,px3:``,py2:``,class:i(e.id===u.value?.id?`bg-active`:``),onClick:t=>a.value=e.id},[e.icon?(o(),d(m,{key:0,icon:e.icon},null,8,[`icon`])):c(``,!0),f(`span`,{class:i(e.id===u.value?.id?``:`op50`)},h(e.name)+h(e.isTerminated?` (terminated)`:``),3),e.isTerminated?(o(),d(y,{key:1,icon:`carbon-close`,"mx--2":``,border:!1,onClick:v(t=>_(e.id),[`stop`])},null,8,[`onClick`])):c(``,!0)],10,I))),128))]),u.value?(o(),d(b,{id:u.value.id,key:u.value.id},null,8,[`id`])):(o(),g(`div`,L,[p[0]||=e(` Terminal `,-1),f(`code`,null,h(r(a)),1),p[1]||=e(` not found `,-1)]))])):(o(),g(`div`,R,[...p[2]||=[f(`em`,{op50:``},`No terminal attached`,-1)]]))}}}),B=Object.assign(z,{__name:`TerminalPage`}),V=n({__name:`terminals`,setup(e){return(e,t)=>{let n=B,r=D;return o(),d(r,null,{default:u(()=>[_(n)]),_:1})}}});export{V as default};