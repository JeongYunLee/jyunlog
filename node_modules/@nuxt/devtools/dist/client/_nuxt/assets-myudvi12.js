import{C as e,Ct as t,E as n,Mt as r,Q as i,Qt as a,W as o,X as s,Y as c,_ as l,c as u,dt as d,en as f,ft as p,g as m,h,m as g,tn as _,v,vt as y,w as b}from"./vendor/json-editor-vue-jlmu1vk1.js";import{A as x,O as S}from"./ready-mmkdpbhg.js";import"./nuxt-h34yfo3l.js";import"./head-k6pu038r.js";import{c as C,h as w,z as T}from"./state-b65zn1p8.js";import{D as E,L as D,M as O,N as k,P as A,b as j,d as M,h as N,p as P,u as F}from"./client-ea5fdhj9.js";import"./vendor/shiki-jnavg768.js";import{t as I}from"./storage-options-os0x8zby.js";import{c as L,n as R}from"./dev-auth-jrf61eu0.js";import"./nuxt-link-lrojf3ui.js";import{t as z}from"./nicon-j0r9gdjm.js";import{t as B}from"./nbutton-m0kqfedx.js";import"./ncard-qqqgbjy9.js";import"./state-routes-ovtjymzc.js";import{t as V}from"./telemetry-pccqt90w.js";import{t as H}from"./ntext-input-ozkk5xro.js";import{d as ee,f as te,s as U,u as ne}from"#entry";import{t as W}from"./ndropdown-lkmzobqs.js";import"./client-lfu9nb62.js";import"./ncode-block-o9sq6td7.js";import{t as G}from"./ndrawer-ufyhcx08.js";import"./composables-k2ak4j8d.js";import{t as K}from"./ncheckbox-knbe2cxv.js";import{t as re}from"./filepath-item-e4nchqwg.js";import{t as q}from"./nnavbar-b0i34u17.js";import"./nicon-title-ggx25xp9.js";import{t as J}from"./nsection-block-dzbgwc4z.js";import{t as Y}from"./code-snippets-c0ulfayj.js";var X={key:0,"h-full":``,"w-full":``,flex:``,"items-center":``,"justify-center":``},ie={for:`drop-zone-input`,"text-3xl":``,hover:`text-green cursor-pointer`,"transition-all":``},ae={key:1,relative:``,"h-full":``,"w-full":``,grid:`~ rows-[max-content_1fr_max-content]`},oe={grid:`~ cols-minmax-8rem gap-8`,"overflow-auto":``,p6:``},se={flex:``,"items-center":``,"justify-center":``,"of-hidden":``,rounded:``,"rounded-t-lg":``,"bg-active":``,"object-cover":``,class:`aspect-1/1`,border:`~ base`},ce=[`src`],le={flex:`~ gap1`,"items-center":``},ue={flex:`~ gap-2`,"items-center":``,"justify-center":``,p8:``},de=n({__name:`AssetDropZone`,props:{modelValue:{type:Boolean,required:!0},folder:{type:String,required:!0}},setup(n){let s=n,f=A(s,`modelValue`),g=t(),_=t([]);function y(e){g.value=e.target,f.value=!0}function x(e){e.target===g.value&&(f.value=!1)}function S(e){e.preventDefault()}function C(e){e.preventDefault(),w(e.dataTransfer.files)}function w(e){let t=Array.from(e||[]);if(t.length){let e=[],n=_.value.map(e=>e.name);for(let r of t)if(n.includes(r.name)){let t=1,[i,a]=r.name.split(`.`);for(;n.includes(`${i} (${t}).${a}`);)t++;let o=`${i}-${t}.${a}`,s=new Blob([r],{type:r.type}),c=new File([s],o,{lastModified:Date.now()});e.push(c),n.push(o)}else r.type===``&&L({message:`Folders are not supported yet`,icon:`carbon:face-dissatisfied`,classes:`text-orange`}),e.push(r);_.value=[..._.value,...e]}}async function T(){if(M.value||P.value)return;V(`assets:upload`);let e=[];for(let t of _.value){let n=new FileReader;n.readAsDataURL(t);let r=(await new Promise(e=>{n.onload=()=>e(n.result)})).split(`;base64,`).pop();e.push({path:t.name,encoding:`base64`,content:r})}await F.writeStaticAssets(await R(),[...e],s.folder).then(()=>{N(),L({message:`Files uploaded successfully!`,icon:`i-carbon:checkmark`})}).catch(e=>{N(),L({message:`Error uploading files: ${e?.message??`unknown`}`,icon:`i-carbon-warning`,classes:`text-red`})}),f.value=!1}function D(e){_.value?.splice(e,1)}function O(e){return URL.createObjectURL(e)}function k(e,t){let[n,r]=e.name.split(`.`),i=t.replace(/\.\w+$/,``),a=`${i}.${r}`;return i.length===0?(alert(`File name must be at least 1 characters long`),n):(Object.defineProperty(e,`name`,{value:a,writable:!1}),_.value.splice(_.value.indexOf(e),1,e),e)}function j(){_.value=[]}function N(){f.value=!1,j()}return E(`dragenter`,y),E(`dragleave`,x),E(`dragover`,S),E(`drop`,C),(t,n)=>{let s=B,g=z,y=H,x=i(`tooltip`);return o(),v(`div`,{fixed:``,"bottom-0":``,"left-13":``,"right-0":``,"top-0":``,"z-10":``,"backdrop-blur-20":``,"transition-all":``,class:a(r(f)?`opacity-100 visible`:`opacity-0 invisible`)},[p(b(s,{icon:`carbon-close`,title:`Close`,absolute:``,"right-5":``,"top-5":``,"z-20":``,"text-xl":``,border:!1,onClick:N},null,512),[[x,`Close`,void 0,{"bottom-end":!0}]]),_.value?.length?(o(),v(`div`,ae,[n[4]||=h(`div`,{px6:``,py6:``},[h(`h1`,{"text-2xl":``},` Upload `),h(`p`,{"text-sm":``,op50:``},` Drag and drop files to upload `)],-1),h(`div`,oe,[(o(!0),v(u,null,c(_.value,(e,t)=>(o(),v(`div`,{key:e.name,flex:`~ col gap-2`,relative:``,"h-50":``,"w-40":``,"items-center":``},[h(`div`,se,[h(`img`,{"h-full":``,"w-full":``,"rounded-t-lg":``,"object-cover":``,src:O(e)},null,8,ce)]),h(`div`,le,[b(y,{n:`xs`,"h-full":``,"flex-auto":``,"model-value":e.name,"onUpdate:modelValue":t=>k(e,t.target.value)},null,8,[`model-value`,`onUpdate:modelValue`]),b(s,{n:`red`,icon:`carbon-trash-can`,"h-full":``,"flex-none":``,title:`Remove file`,onClick:e=>D(t)},null,8,[`onClick`])])]))),128))]),h(`div`,ue,[_.value.length?(o(),m(s,{key:0,n:`red`,onClick:j},{default:d(()=>[b(g,{icon:`carbon-clean`}),n[2]||=e(` Clear `,-1)]),_:1})):l(``,!0),b(s,{disabled:!_.value.length,n:`primary solid`,onClick:T},{default:d(()=>[b(g,{icon:`carbon-cloud-upload`}),n[3]||=e(` Upload `,-1)]),_:1},8,[`disabled`])])])):(o(),v(`div`,X,[h(`label`,ie,[b(g,{icon:`carbon-cloud-upload`,"mr-2":``}),n[1]||=e(` Drop files here or click to select `,-1)]),h(`input`,{id:`drop-zone-input`,type:`file`,multiple:``,hidden:``,onChange:n[0]||=e=>w(e.target.files)},null,32)]))],2)}}}),fe=Object.assign(de,{__name:`AssetDropZone`}),pe=n({__name:`AssetFontPreview`,props:{asset:{}},setup(e){let t=e,n=g(()=>`devtools-assets-${T(t.asset)}`);return O(g(()=>`
  @font-face {
    font-family: '${n.value}';
    src: url('${t.asset.publicPath}');
  }
`)),(e,t)=>(o(),v(`div`,{"of-hidden":``,style:f({fontFamily:`'${n.value}'`})},` Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz `,4))}}),me=Object.assign(pe,{__name:`AssetFontPreview`}),he={flex:``,"items-center":``,"justify-center":``,"of-hidden":``,"bg-active":``,"object-cover":``,p1:``},ge=[`src`],_e={key:2,"i-carbon-document":``,"text-3xl":``,op20:``},ve={key:3,"w-full":``,"self-start":``,p4:``},ye=[`textContent`],be={key:4},xe=[`src`,`autoplay`,`controls`],Se={key:5},Ce={key:0,"i-carbon-volume-up":``,"text-3xl":``,op20:``},we=[`src`],Te={key:6,"i-carbon-help":``,"text-3xl":``,op20:``},Ee=n({__name:`AssetPreview`,props:{asset:{},textContent:{},detail:{type:Boolean}},setup(e){return(t,n)=>{let r=me;return o(),v(`div`,he,[e.asset.type===`image`?(o(),v(`img`,{key:0,src:e.asset.publicPath},null,8,ge)):e.asset.type===`font`?(o(),m(r,{key:e.asset.publicPath,asset:e.asset,"self-stretch":``,p2:``,"text-2xl":``},null,8,[`asset`])):e.asset.type===`text`&&!e.textContent?(o(),v(`div`,_e)):e.asset.type===`text`&&e.textContent?(o(),v(`div`,ve,[h(`pre`,{"max-h-10rem":``,"of-hidden":``,"text-xs":``,"font-mono":``,textContent:_(e.textContent)},null,8,ye)])):e.asset.type===`video`?(o(),v(`div`,be,[h(`video`,{src:e.asset.publicPath,autoplay:e.detail,controls:e.detail},null,8,xe)])):e.asset.type===`audio`?(o(),v(`div`,Se,[e.detail?(o(),v(`audio`,{key:1,src:e.asset.publicPath,controls:``},null,8,we)):(o(),v(`div`,Ce))])):(o(),v(`div`,Te))])}}}),Z=Object.assign(Ee,{__name:`AssetPreview`}),De={relative:``,flex:`~ col gap-1`,hover:`bg-active`,"items-center":``,"of-hidden":``,rounded:``,p2:``},Oe={"w-full":``,"of-hidden":``,truncate:``,"ws-nowrap":``,"text-center":``,"text-xs":``},ke=n({__name:`AssetGridItem`,props:{asset:{},folder:{}},setup(e){let t=e,n=g(()=>t.folder&&t.asset.path.startsWith(t.folder)?t.asset.path.slice(t.folder.length):t.asset.path);return(t,r)=>{let i=z,a=Z;return o(),v(`button`,De,[e.asset.layer?(o(),m(i,{key:0,icon:`i-carbon-layers`,absolute:``,"right-4":``,"top-4":``,"bg-primary":``})):l(``,!0),b(a,{"h-30":``,"w-30":``,rounded:``,border:`~ base`,asset:e.asset},null,8,[`asset`]),h(`div`,Oe,_(n.value),1)])}}}),Ae=Object.assign(ke,{__name:`AssetGridItem`}),je=n({__name:`AssetListItem`,props:{item:{},index:{default:0},modelValue:{}},setup(n,{emit:i}){let d=n,p=A(d,`modelValue`,i,{passive:!0}),b=g(()=>d.item?.children?.length),x=t(!0),S=g(()=>b.value?`i-carbon-folder`:d.item.type===`image`?`i-carbon-image`:d.item.type===`video`?`i-carbon-video`:d.item.type===`audio`?`i-carbon-volume-up`:d.item.type===`font`?`i-carbon-text-small-caps`:d.item.type===`text`?`i-carbon-document`:d.item.type===`json`?`i-carbon-json`:`i-carbon-document-blank`);return(t,i)=>{let d=z,g=Q;return o(),v(`div`,null,[h(`button`,{flex:`~ gap-2`,"w-full":``,"items-center":``,hover:`bg-active`,px4:``,py1:``,style:f({paddingLeft:`calc(1rem + ${n.index*1.5}em)`}),class:a({"bg-active":!b.value&&r(p)?.filePath===n.item?.filePath}),border:`b base`,onClick:i[0]||=e=>b.value?x.value=!x.value:p.value=n.item},[h(`div`,{class:a(S.value)},null,2),h(`span`,{class:a({"flex items-center":b.value}),"flex-auto":``,"text-start":``,"text-sm":``,"font-mono":``},[e(_(n.item.path)+` `,1),n.item.layer?(o(),m(d,{key:0,icon:`i-carbon-layers`,"bg-primary":``})):l(``,!0)],2),b.value?(o(),m(d,{key:0,icon:`carbon:chevron-right`,"transform-rotate":x.value?90:0,transition:``},null,8,[`transform-rotate`])):l(``,!0)],6),x.value?s(t.$slots,`default`,{key:0},()=>[(o(!0),v(u,null,c(n.item?.children,e=>(o(),m(g,{key:e.filepath,modelValue:r(p),"onUpdate:modelValue":i[1]||=e=>y(p)?p.value=e:null,item:e,index:n.index+1},null,8,[`modelValue`,`item`,`index`]))),128))]):l(``,!0)])}}}),Q=Object.assign(je,{__name:`AssetListItem`}),Me={flex:`~ col gap-4`,"min-h-full":``,"w-full":``,"of-hidden":``,p4:``},Ne={flex:`~`,"items-center":``,"justify-center":``},Pe={"max-w-full":``,"w-full":``,"table-fixed":``},Fe={flex:`~ gap-1`,"w-full":``,"items-center":``},Ie={flex:`~ gap-1`,"w-full":``,"items-center":``,"of-hidden":``},Le={"flex-auto":``,"of-hidden":``,truncate:``,"ws-pre":``,"font-mono":``},Re={capitalize:``},ze={key:0},Be={op70:``},Ve={flex:`~ gap2 wrap`},He={flex:`~ col gap-4`,"min-h-full":``,"w-full":``,"of-hidden":``,p8:``},Ue={flex:`~ gap2 wrap justify-center`},We={flex:`~ col gap-4`,"min-h-full":``,"w-full":``,"of-hidden":``,p8:``},Ge={flex:`~ gap2 wrap justify-center`},Ke={flex:`~ col gap-4`,"min-h-full":``,"w-full":``,"of-hidden":``,p4:``},qe={flex:``,"justify-end":``,"gap-4":``},Je=n({__name:`AssetDetails`,props:{modelValue:{}},setup(n,{emit:a}){let s=A(n,`modelValue`,a,{passive:!0}),c=N(async()=>{if(s.value.type===`image`)return F.getImageMeta(await R(),s.value.filePath)}),f=t(!1),y=t(),w=t(0),T=N(async()=>{if(s.value.type!==`text`)return;w.value;let e=await F.getTextAssetContent(await R(),s.value.filePath);return y.value=e,e});async function E(){if(T.value!==y.value)try{await F.writeStaticAssets(await R(),[{path:s.value.path,content:y.value,override:!0}],``),f.value=!1,w.value++,L({message:`Updated`,icon:`i-carbon-checkmark`,classes:`text-green`})}catch(e){console.error(e),L({message:`Something went wrong!`,icon:`i-carbon-warning`,classes:`text-red`})}}let D=C(),O=g(()=>(D.value?._installedModules||[]).some(e=>e.meta?.name===`@nuxt/image`||e.meta?.name===`@nuxt/image-edge`||e.meta?.name===`@nuxt/image-nightly`)),j=g(()=>{let e=[];if(s.value.type===`image`){let t=c.value?.width?`\n  width="${c.value.width}"\n  height="${c.value.height}" `:` `;return e.push({lang:`vue-html`,code:`<img${t}\n  src="${s.value.publicPath}"\n/>`,name:`Plain Image`}),O.value&&e.push({lang:`vue-html`,code:`<NuxtImg${t}\n  src="${s.value.publicPath}"\n/>`,name:`Nuxt Img`,docs:`https://image.nuxt.com/usage/nuxt-img`},{lang:`vue-html`,code:`<NuxtPicture${t}\n  src="${s.value.publicPath}"\n/>`,name:`Nuxt Picture`,docs:`https://image.nuxt.com/usage/nuxt-picture`}),e}return e.push({lang:`html`,code:`<a download href="${s.value.publicPath}">\n  Download ${s.value.path.split(`/`).slice(-1)[0]}\n</a>`,name:`Download link`}),e}),M=ne(),P=ee(),I=k(()=>s.value.mtime),z=g(()=>{let e=s.value.size;return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/1024/1024).toFixed(2)} MB`}),V=g(()=>{if(!c.value?.width||!c.value?.height)return``;let e=(t,n)=>n?e(n,t%n):t,t=e(c.value.width,c.value.height);return t>3?`${c.value.width/t}:${c.value.height/t}`:``}),U=g(()=>[`image`,`text`,`video`,`audio`,`font`].includes(s.value.type)),W=t(!1);async function G(){try{await F.deleteStaticAsset(await R(),s.value.filePath),s.value=void 0,W.value=!1,L({message:`Asset deleted`,icon:`i-carbon-checkmark`,classes:`text-green`})}catch(e){console.error(e),L({message:`Something went wrong!`,icon:`i-carbon-warning`,classes:`text-red`})}}let K=t(!1),q=t(``);async function J(){let e=s.value.filePath.split(`/`),t=e.slice(-1)[0]?.split(`.`).slice(0,-1).join(`.`);if(!q.value||q.value===t)return L({message:`Please enter a new name`,icon:`i-carbon-warning`,classes:`text-orange`});try{let t=e.slice(-1)[0]?.split(`.`).slice(-1)[0],n=`${e.slice(0,-1).join(`/`)}/${q.value}.${t}`;await F.renameStaticAsset(await R(),s.value.filePath,n),s.value=void 0,K.value=!1,L({message:`Asset renamed`,icon:`i-carbon-checkmark`,classes:`text-green`})}catch(e){console.error(e),L({message:`Something went wrong!`,icon:`i-carbon-warning`,classes:`text-red`})}}return(t,n)=>{let a=Z,g=re,C=B,w=Y,D=te,O=H,k=i(`tooltip`);return o(),v(u,null,[h(`div`,Me,[U.value?(o(),v(u,{key:0},[n[13]||=h(`div`,{flex:`~ gap2`,"mb--2":``,"items-center":``,op50:``},[h(`div`,{"x-divider":``}),h(`div`,{"flex-none":``},` Preview `),h(`div`,{"x-divider":``})],-1),h(`div`,Ne,[b(a,{detail:``,"max-h-80":``,"min-h-20":``,"min-w-20":``,"w-auto":``,rounded:``,border:`~ base`,asset:r(s),"text-content":r(T)},null,8,[`asset`,`text-content`])])],64)):l(``,!0),n[25]||=h(`div`,{flex:`~ gap2`,"mb--2":``,"items-center":``,op50:``},[h(`div`,{"x-divider":``}),h(`div`,{"flex-none":``},` Details `),h(`div`,{"x-divider":``})],-1),h(`table`,Pe,[h(`tbody`,null,[h(`tr`,null,[n[14]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Filepath `,-1),h(`td`,null,[h(`div`,Fe,[b(g,{filepath:r(s).filePath,"text-left":``},null,8,[`filepath`]),p(b(C,{"flex-none":``,title:`Open in Editor`,icon:`carbon-launch`,border:!1,onClick:n[0]||=e=>r(P)(r(s).filePath)},null,512),[[k,`Open in Editor`]])])])]),h(`tr`,null,[n[15]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Public Path `,-1),h(`td`,null,[h(`div`,Ie,[h(`div`,Le,_(r(s).publicPath),1),p(b(C,{"flex-none":``,title:`Copy public path`,icon:`carbon-copy`,border:!1,onClick:n[1]||=e=>r(M)(r(s).publicPath,`assets-public-path`)},null,512),[[k,`Copy public path`]]),p(b(C,{"flex-none":``,to:r(s).publicPath,icon:`carbon-launch`,target:`_blank`,border:!1,title:`Open in browser`},null,8,[`to`]),[[k,`Open in browser`]])])])]),h(`tr`,null,[n[16]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Type `,-1),h(`td`,Re,_(r(s).type),1)]),r(c)?.width?(o(),v(u,{key:0},[h(`tr`,null,[n[17]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Image Size `,-1),h(`td`,null,_(r(c).width)+` x `+_(r(c).height),1)]),V.value?(o(),v(`tr`,ze,[n[18]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Aspect Ratio `,-1),h(`td`,null,_(V.value),1)])):l(``,!0)],64)):l(``,!0),h(`tr`,null,[n[19]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` File size `,-1),h(`td`,null,_(z.value),1)]),h(`tr`,null,[n[20]||=h(`td`,{"w-30":``,"ws-nowrap":``,pr5:``,"text-right":``,op50:``},` Last modified `,-1),h(`td`,null,[e(_(new Date(r(s).mtime).toLocaleString())+` `,1),h(`span`,Be,`(`+_(r(I))+`)`,1)])])])]),n[26]||=h(`div`,{flex:`~ gap2`,"mb--2":``,"items-center":``,op50:``},[h(`div`,{"x-divider":``}),h(`div`,{"flex-none":``},` Actions `),h(`div`,{"x-divider":``})],-1),h(`div`,Ve,[b(C,{to:r(s).publicPath,download:``,target:`_blank`,icon:`carbon-download`,n:`green`},{default:d(()=>[...n[21]||=[e(` Download `,-1)]]),_:1},8,[`to`]),r(s).type===`text`?(o(),m(C,{key:0,icon:`carbon-edit`,n:`cyan`,onClick:n[2]||=e=>f.value=!f.value},{default:d(()=>[...n[22]||=[e(` Edit `,-1)]]),_:1})):l(``,!0),b(C,{icon:`carbon-text-annotation-toggle`,n:`blue`,onClick:n[3]||=e=>K.value=!K.value},{default:d(()=>[...n[23]||=[e(` Rename `,-1)]]),_:1}),b(C,{icon:`carbon-delete`,n:`red`,onClick:n[4]||=e=>W.value=!W.value},{default:d(()=>[...n[24]||=[e(` Delete `,-1)]]),_:1})]),n[27]||=h(`div`,{"flex-auto":``},null,-1),j.value.length?(o(),m(w,{key:1,border:`t base`,"mx--4":``,"mb--4":``,"code-snippets":j.value},null,8,[`code-snippets`])):l(``,!0)]),b(D,{modelValue:W.value,"onUpdate:modelValue":n[6]||=e=>W.value=e},{default:d(()=>[h(`div`,He,[n[30]||=h(`span`,null,` Are you sure you want to delete this asset? `,-1),h(`div`,Ue,[b(C,{icon:`carbon-close`,onClick:n[5]||=e=>W.value=!1},{default:d(()=>[...n[28]||=[e(` Cancel `,-1)]]),_:1}),b(C,{icon:`carbon-delete`,n:`red`,onClick:G},{default:d(()=>[...n[29]||=[e(` Delete `,-1)]]),_:1})])])]),_:1},8,[`modelValue`]),b(D,{modelValue:K.value,"onUpdate:modelValue":n[9]||=e=>K.value=e},{default:d(()=>[h(`div`,We,[b(O,{modelValue:q.value,"onUpdate:modelValue":n[7]||=e=>q.value=e,placeholder:`New name`,n:`blue`},null,8,[`modelValue`]),h(`div`,Ge,[b(C,{icon:`carbon-close`,onClick:n[8]||=e=>K.value=!1},{default:d(()=>[...n[31]||=[e(` Cancel `,-1)]]),_:1}),b(C,{icon:`carbon-text-annotation-toggle`,n:`blue`,onClick:J},{default:d(()=>[...n[32]||=[e(` Rename `,-1)]]),_:1})])])]),_:1},8,[`modelValue`]),r(s).type===`text`?(o(),m(D,{key:0,modelValue:f.value,"onUpdate:modelValue":n[12]||=e=>f.value=e},{default:d(()=>[h(`div`,Ke,[p(h(`textarea`,{"onUpdate:modelValue":n[10]||=e=>y.value=e,placeholder:`Item value...`,class:`h-lg w-xl of-auto rounded-lg p-4 text-sm font-mono outline-none`,onKeydown:x(E,[`enter`])},null,544),[[S,y.value]]),h(`div`,qe,[b(C,{icon:`carbon-close`,onClick:n[11]||=e=>f.value=!1},{default:d(()=>[...n[33]||=[e(` Cancel `,-1)]]),_:1}),b(C,{icon:`carbon:save`,n:`primary`,onClick:E},{default:d(()=>[...n[34]||=[e(` save `,-1)]]),_:1})])])]),_:1},8,[`modelValue`])):l(``,!0)],64)}}}),$=Object.assign(Je,{__name:`AssetDetails`}),Ye={"h-full":``,"of-auto":``},Xe={"flex-none":``,flex:`~ gap2 items-center`,"text-lg":``},Ze={flex:`~ items-center justify-center`,absolute:``,"bottom--1":``,"right--1":``,"h-4":``,"w-4":``,"rounded-full":``,"bg-primary:30":``,"text-8px":``},Qe={flex:`~ col`,"w-30":``,"of-auto":``},$e={"text-xs":``,op75:``},et={op50:``},tt={key:0},nt={"mt--4":``,px2:``,grid:`~ cols-minmax-8rem`},rt={key:1,p2:``,grid:`~ cols-minmax-8rem`},it={key:1},at=n({__name:`assets`,setup(e){let n=w(),a=t(!1),s=t(``),f=g(()=>new U(n.value||[],{keys:[`path`]})),y=D(()=>{let e=[];for(let t of n.value||[]){let n=t.path.split(`.`).pop();n&&!e.find(e=>e.name===n)&&e.push({name:n,value:!0})}return e}),x=g(()=>(s.value?f.value.search(s.value).map(e=>e.item):n.value||[]).filter(e=>{let t=e.path.split(`.`).pop();return!t||y.some(e=>e.name===t&&e.value)})),S=g(()=>{let e={};for(let t of x.value){let n=`${t.path.split(`/`).slice(0,-1).join(`/`)}/`;e[n]||(e[n]=[]),e[n].push(t)}return Object.entries(e).sort(([e],[t])=>e.localeCompare(t))}),C=g(()=>{let e={path:`public`,children:[]},t=(e,n,r)=>{let[i,...a]=n,o=e.children.find(e=>e.path===i);o||(o={...r,path:i,children:[]},e.children.push(o)),a.length>1?t(o,a,r):a.length===1&&o.children.push({...r,path:a[0]})};return x.value.forEach(n=>{t(e,n.path.split(`/`).filter(e=>e!==``),n)}),e.children}),T=t(),{view:E}=I(`assets`);function O(){E.value=E.value===`list`?`grid`:`list`}j(`Escape`,()=>{T.value=void 0});let k=t();return(e,t)=>{let f=B,g=K,w=W,D=q,A=fe,j=Ae,M=J,N=Q,P=$,F=G,I=i(`tooltip`);return o(),v(`div`,Ye,[b(D,{ref_key:`navbar`,ref:k,search:s.value,"onUpdate:search":t[1]||=e=>s.value=e,pb2:``},{actions:d(()=>[h(`div`,Xe,[p(b(f,{icon:`carbon:cloud-upload`,title:`File Upload`,border:!1,onClick:t[0]||=e=>a.value=!a.value},null,512),[[I,`File Upload`,void 0,{"bottom-end":!0}]]),r(y).length?(o(),m(w,{key:0,direction:`end`,n:`sm primary`},{trigger:d(({click:e})=>[p(b(f,{icon:`carbon-filter`,border:!1,title:`Filter`,p3:``,"text-lg":``,onClick:t=>e()},null,8,[`onClick`]),[[I,`Filter`,void 0,{"bottom-end":!0}]]),h(`span`,Ze,_(r(y).length),1)]),default:d(()=>[h(`div`,Qe,[(o(!0),v(u,null,c(r(y),e=>(o(),m(g,{key:e.name,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,flex:`~ gap-2`,rounded:``,px2:``,py2:``},{default:d(()=>[h(`span`,$e,_(e.name),1)]),_:2},1032,[`modelValue`,`onUpdate:modelValue`]))),128))])]),_:1})):l(``,!0),p(b(f,{"text-lg":``,border:!1,icon:r(E)===`grid`?`i-carbon-list`:`i-carbon-grid`,title:`Toggle view`,onClick:O},null,8,[`icon`]),[[I,`Toggle View`,void 0,{"bottom-end":!0}]])])]),default:d(()=>[h(`div`,et,[s.value?(o(),v(`span`,tt,_(x.value.length)+` matched Â· `,1)):l(``,!0),h(`span`,null,_(r(n)?.length)+` assets in total`,1)])]),_:1},8,[`search`]),b(A,{modelValue:a.value,"onUpdate:modelValue":t[2]||=e=>a.value=e,folder:`/`},null,8,[`modelValue`]),r(E)===`grid`?(o(),v(u,{key:0},[S.value.length>1?(o(!0),v(u,{key:0},c(S.value,([e,t])=>(o(),m(M,{key:e,text:e,description:`${t.length} items`,open:t.length<=r(50),padding:!1},{default:d(()=>[h(`div`,nt,[(o(!0),v(u,null,c(t,t=>(o(),m(j,{key:t.path,asset:t,folder:e,onClick:e=>T.value=t},null,8,[`asset`,`folder`,`onClick`]))),128))])]),_:2},1032,[`text`,`description`,`open`]))),128)):(o(),v(`div`,rt,[(o(!0),v(u,null,c(x.value,e=>(o(),m(j,{key:e.path,asset:e,onClick:t=>T.value=e},null,8,[`asset`,`onClick`]))),128))]))],64)):(o(),v(`div`,it,[(o(!0),v(u,null,c(C.value,(e,n)=>(o(),m(N,{key:n,modelValue:T.value,"onUpdate:modelValue":t[3]||=e=>T.value=e,item:e},null,8,[`modelValue`,`item`]))),128))])),b(F,{"model-value":!!T.value,"auto-close":``,"w-120":``,top:k.value,onClose:t[5]||=e=>T.value=void 0},{default:d(()=>[T.value?(o(),m(P,{key:0,modelValue:T.value,"onUpdate:modelValue":t[4]||=e=>T.value=e},null,8,[`modelValue`])):l(``,!0)]),_:1},8,[`model-value`,`top`])])}}});export{at as default};