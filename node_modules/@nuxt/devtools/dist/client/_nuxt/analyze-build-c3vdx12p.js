import{C as e,Ct as t,E as n,Mt as r,Qt as i,W as a,Y as o,_ as s,c,dt as l,ft as u,g as d,h as f,m as p,tn as m,v as h,w as g}from"./vendor/json-editor-vue-jlmu1vk1.js";import{g as _,k as v}from"./ready-mmkdpbhg.js";import{a as y}from"./nuxt-h34yfo3l.js";import"./head-k6pu038r.js";import{N as b,t as x}from"./state-b65zn1p8.js";import{_ as S,u as C,v as w}from"./client-ea5fdhj9.js";import"./vendor/shiki-jnavg768.js";import"./storage-options-os0x8zby.js";import{n as T}from"./dev-auth-jrf61eu0.js";import"./nuxt-link-lrojf3ui.js";import{t as E}from"./_plugin-vue_export-helper-myijwyyb.js";import"./nicon-j0r9gdjm.js";import{t as D}from"./nbutton-m0kqfedx.js";import"./ncard-qqqgbjy9.js";import{r as O}from"./state-routes-ovtjymzc.js";import{t as k}from"./telemetry-pccqt90w.js";import"./state-tabs-jkd7jbwg.js";import{t as A}from"./npanel-grids-m4ogaoh1.js";import{t as j}from"./ntext-input-ozkk5xro.js";import{c as M,f as N,o as P,p as F,t as I}from"#entry";import"./client-lfu9nb62.js";import{t as L}from"./ncode-block-o9sq6td7.js";import"./composables-k2ak4j8d.js";import{t as R}from"./ncheckbox-knbe2cxv.js";import{t as z}from"./filepath-item-e4nchqwg.js";import{t as B}from"./help-fab-hk76lwiw.js";var V={"h-full":``,grid:`~ rows-[max-content_1fr]`},H={flex:`~ wrap`,"w-full":``},U=[`onClick`],W={key:0,flex:`~ col gap-4 items-center justify-center`,p4:``},G={grid:`~ cols-[30px_1fr] gap-x-2 gap-y-3 items-center justify-center`,"w-100":``},K=`/__nuxt_devtools__/client`,q=n({__name:`BuildAnalyzeDetails`,props:{current:{},prev:{}},setup(n){let d=n,_=`${y().app.baseURL.replace(K,`/`)}/__nuxt_devtools__/analyze/`.replace(/\/+/g,`/`),b=p(()=>{let e=[{name:`Overview`,id:`overview`}];return d.current.features.bundleClient&&e.push({name:`Client Bundle`,id:`bundle-client`}),d.current.features.bundleNitro&&e.push({name:`Nitro Bundle`,id:`bundle-nitro`}),d.current.features.viteInspect&&e.push({name:`Vite Inspect`,id:`vite-inspect`}),e}),x=t(b.value[0]);function S(e){return`${((e.endTime-e.startTime)/1e3).toFixed(1)}s`}function E(e){return e<1024?`${e}B`:e<1024*1024?`${(e/1024).toFixed(1)}KB`:e<1024*1024*1024?`${(e/1024/1024).toFixed(1)}MB`:`${(e/1024/1024/1024).toFixed(1)}GB`}async function O(e){return C.clearAnalyzeBuilds(await T(),[e])}return(t,d)=>{let p=z,y=D;return a(),h(`div`,V,[f(`div`,H,[(a(!0),h(c,null,o(b.value,(e,t)=>(a(),h(`button`,{key:t,px4:``,py2:``,border:`r base`,hover:`bg-active`,class:i(e.id===x.value?.id?``:`border-b`),onClick:t=>x.value=e},[f(`div`,{class:i(e.id===x.value?.id?``:`op30`)},m(e.name),3)],10,U))),128)),d[1]||=f(`div`,{border:`b base`,"flex-auto":``},null,-1)]),x.value?.id===`overview`?(a(),h(`div`,W,[d[15]||=f(`div`,{"flex-auto":``},null,-1),f(`div`,G,[d[10]||=f(`div`,{"i-carbon-commit":``,"text-xl":``},null,-1),f(`div`,null,[d[2]||=f(`div`,{"text-sm":``,op50:``},` Name `,-1),f(`div`,null,m(n.current.name),1)]),d[11]||=f(`div`,{"i-carbon-time":``,"text-xl":``},null,-1),f(`div`,null,[d[3]||=f(`div`,{"text-sm":``,op50:``},` Build duration `,-1),f(`div`,null,m(S(n.current)),1)]),n.current.size?.clientBundle?(a(),h(c,{key:0},[d[5]||=f(`div`,{"i-carbon-cics-program":``,"text-xl":``},null,-1),f(`div`,null,[d[4]||=f(`div`,{"text-sm":``,op50:``},` Client bundle size `,-1),f(`div`,null,m(E(n.current.size.clientBundle)),1)])],64)):s(``,!0),n.current.size?.nitroBundle?(a(),h(c,{key:1},[d[7]||=f(`div`,{"i-carbon-bare-metal-server":``,"text-xl":``},null,-1),f(`div`,null,[d[6]||=f(`div`,{"text-sm":``,op50:``},` Nitro bundle size `,-1),f(`div`,null,m(E(n.current.size.nitroBundle)),1)])],64)):s(``,!0),d[12]||=f(`div`,{"i-carbon-edge-node":``,"text-xl":``},null,-1),f(`div`,null,[d[8]||=f(`div`,{"text-sm":``,op50:``},` Built `,-1),f(`div`,null,m(r(w)(new Date(n.current.endTime))),1)]),d[13]||=f(`div`,{"i-carbon:folder-parent":``,"text-xl":``},null,-1),f(`div`,null,[d[9]||=f(`div`,{"text-sm":``,op50:``},` Report Path `,-1),g(p,{filepath:n.current.analyzeDir},null,8,[`filepath`])])]),d[16]||=f(`div`,{"flex-auto":``},null,-1),g(y,{n:`rose`,icon:`carbon-delete`,onClick:d[0]||=e=>O(n.current.name)},{default:l(()=>[...d[14]||=[e(` Delete this report `,-1)]]),_:1})])):s(``,!0),d._lazyshow1||x.value?.id===`bundle-client`?(d._lazyshow1=!0,a(),h(c,null,[u(f(`iframe`,{src:`${r(_)}${n.current.slug}/client.html`,"h-full":``,"w-full":``},null,8,[`src`]),[[v,x.value?.id===`bundle-client`]])],64)):s(`v-show-if`,!0),d._lazyshow2||x.value?.id===`bundle-nitro`?(d._lazyshow2=!0,a(),h(c,null,[u(f(`iframe`,{src:`${r(_)}${n.current.slug}/nitro.html`,"h-full":``,"w-full":``},null,8,[`src`]),[[v,x.value?.id===`bundle-nitro`]])],64)):s(`v-show-if`,!0),d._lazyshow3||x.value?.id===`vite-inspect`?(d._lazyshow3=!0,a(),h(c,null,[u(f(`iframe`,{src:`${r(_)}${n.current.slug}/.vite-inspect/`,"h-full":``,"w-full":``},null,8,[`src`]),[[v,x.value?.id===`vite-inspect`]])],64)):s(`v-show-if`,!0)])}}}),J=Object.assign(q,{__name:`BuildAnalyzeDetails`}),Y={},X={class:`markdown-body`};function Z(t,n){return a(),h(`div`,X,[...n[0]||=[f(`template`,null,[f(`div`,{class:`markdown-body`},[f(`h1`,null,`Build Analyze`),f(`p`,null,[e(`DevTools provides a build analyze tool to help you understand the size of your app in production. Whenever you start a new build, it runs the command `),f(`code`,{"v-pre":``},`nuxt build --analyze`),e(` and present the output data directly in DevTools for easy browsing and comparing.`)])])],-1)]])}var Q=E(Y,[[`render`,Z]]),$={flex:`~ col`},ee=[`onClick`],te={flex:`~ gap-1 items-center wrap`,"w-full":``,"text-sm":``,op60:``},ne={flex:`~ items-center justify-center wrap`,p4:``},re={flex:`~ col gap-1`,"w-250":``,p4:``},ie={flex:`~ gap-3`,mt2:``,"justify-end":``},ae=n({__name:`analyze-build`,setup(n){let u=S(),v=x(),y=_(),E=b(`analyze-build:slug`,``),z=p(()=>v.value?.builds.find(e=>e.slug===E.value)??v.value?.builds[0]),V=t(!1),H=t(``),U=p(()=>v.value?.builds.some(e=>e.name===H.value.trim()));async function W(){H.value=await C.generateAnalyzeBuildName(),await u.start()&&(k(`analyze-build:start`),I.value={name:H.value,processId:await C.startAnalyzeBuild(await T(),H.value)},V.value&&q())}let G=O();function K(e){return`${((e.endTime-e.startTime)/1e3).toFixed(1)}s`}function q(){I.value?.processId&&(G.value=I.value.processId,y.push(`/modules/terminals`))}return P(()=>[{id:`action:analyze-build: start`,title:`Start a new analyze build`,icon:`i-carbon-edge-node`,action:W}]),(t,n)=>{let p=D,_=J,y=A,b=M,x=j,S=F,C=L,T=R,O=N,k=Q,P=B;return a(),h(c,null,[g(b,{"left-size":30},{left:l(()=>[f(`div`,$,[(a(!0),h(c,null,o(r(v)?.builds,e=>(a(),h(c,{key:e.slug},[f(`button`,{flex:`~ col gap1`,p3:``,"hover:bg-active":``,class:i(e.slug===z.value?.slug?`text-primary bg-active`:``),onClick:t=>E.value=e.slug},[f(`code`,null,m(e.name),1),f(`div`,te,[n[4]||=f(`div`,{"i-carbon-time":``},null,-1),f(`span`,null,m(K(e)),1),n[5]||=f(`div`,{"flex-auto":``},null,-1),f(`span`,null,m(r(w)(new Date(e.endTime))),1)])],10,ee),n[6]||=f(`div`,{"x-divider":``},null,-1)],64))),128)),f(`div`,ne,[r(I)?(a(),d(p,{key:1,n:`primary`,icon:`carbon-circle-dash animate-spin`,onClick:n[1]||=e=>q()},{default:l(()=>[...n[8]||=[e(` Building... `,-1)]]),_:1})):(a(),d(p,{key:0,n:`primary`,icon:`carbon-edge-node`,onClick:n[0]||=e=>W()},{default:l(()=>[...n[7]||=[e(` Start a new build `,-1)]]),_:1}))])])]),right:l(()=>[z.value?(a(),d(_,{key:0,current:z.value},null,8,[`current`])):(a(),d(y,{key:1}))]),_:1}),g(r(u),null,{default:l(({resolve:t})=>[g(O,{"model-value":!0,onClose:e=>t(!1)},{default:l(()=>[f(`div`,re,[n[13]||=f(`h3`,{class:`text-lg font-medium leading-6`,mb2:``},` Start analyze build? `,-1),n[14]||=f(`p`,{op50:``},` Enter the name of the build: `,-1),g(x,{modelValue:H.value,"onUpdate:modelValue":n[2]||=e=>H.value=e,placeholder:`Build name`},null,8,[`modelValue`]),U.value?(a(),d(S,{key:0,"n-orange":``},{default:l(()=>[...n[9]||=[e(` A build with the same name already exists, continue would overrides the previous build result. `,-1)]]),_:1})):s(``,!0),n[15]||=f(`div`,{my3:``,"x-divider":``},null,-1),n[16]||=f(`p`,{op50:``},` The following command will be executed in your terminal: `,-1),g(C,{code:`npx nuxi analyze --no-serve --name=${H.value}`,lang:`bash`,px4:``,py2:``,border:`~ base rounded`,lines:!1},null,8,[`code`]),g(T,{modelValue:V.value,"onUpdate:modelValue":n[3]||=e=>V.value=e,mt2:``,n:`primary`},{default:l(()=>[...n[10]||=[e(` Navigate to terminal `,-1)]]),_:1},8,[`modelValue`]),f(`div`,ie,[g(p,{onClick:e=>t(!1)},{default:l(()=>[...n[11]||=[e(` Cancel `,-1)]]),_:1},8,[`onClick`]),g(p,{n:`solid primary`,onClick:e=>t(!0)},{default:l(()=>[...n[12]||=[e(` Start `,-1)]]),_:1},8,[`onClick`])])])]),_:2},1032,[`onClose`])]),_:1}),g(P,null,{default:l(()=>[g(k)]),_:1})],64)}}});export{ae as default};